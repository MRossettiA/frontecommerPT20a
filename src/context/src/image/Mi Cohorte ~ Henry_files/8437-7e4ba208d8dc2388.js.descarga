(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8437],{3832:function(e,t,o){"use strict";o.d(t,{D:function(){return s}});var r=o(5893),n=(o(7294),o(1163)),i=o(1348),a=o(5537),l=o(5764);const s=()=>{var e,t,o;const{pathname:s}=(0,n.useRouter)(),{currentCohort:d,isCurrentCohortLoading:c}=(0,a.u)(),{currentCareer:u,isCurrentCareerLoading:h}=(0,l.X)(),v="CAREER"===(null===d||void 0===d||null===(e=d.career)||void 0===e?void 0:e.type)||"UPSKILLING"===(null===d||void 0===d||null===(t=d.career)||void 0===t?void 0:t.type);return d&&u&&v&&"Proyecto Final"!==(null===u||void 0===u?void 0:u.currentModule.name)&&!s.includes("my-cohorts")?(0,r.jsx)(i.e,{isUpskilling:"UPSKILLING"===(null===d||void 0===d||null===(o=d.career)||void 0===o?void 0:o.type),cohortId:null===d||void 0===d?void 0:d.id,module:null===u||void 0===u?void 0:u.currentModule,isLoading:c||h}):null}},2756:function(e,t,o){"use strict";var r;o.d(t,{U:function(){return n}}),function(e){e.LECTURE="Lecture",e.CODE_REVIEW="Code Review"}(r||(r={}));const n=[{text:r.CODE_REVIEW,value:r.CODE_REVIEW},{text:r.LECTURE,value:r.LECTURE}]},2910:function(e,t,o){"use strict";o.d(t,{z:function(){return N}});var r=o(5893),n=o(7294),i=o(4786),a=o(1479),l=o(7484),s=o.n(l),d=o(4184),c=o.n(d),u=o(8919),h=o(8687),v=o(6486),p=o(4334),g=o(1534),f=o(5591),C=o(1163),m=o(9927),_=o(2756),x=o(1747),j=o.n(x);const y=[u.FQE.required],V=e=>{let{loading:t,showModal:o,setShowModal:n,handleUpdateVideo:i,instructorsOptions:a,modulesOfCohorts:l=[],allLecturesTitles:s=[]}=e;return(0,r.jsxs)(u.u_l,{centered:!1,hideCancelButton:!0,title:"Editar Video",onHide:()=>n(!1),confirmLabel:"Guardar",show:o,formProps:{onSubmit:i},confirmButtonProps:{loading:t},children:[(0,r.jsx)(u.TwS,{name:"title",label:"T\xedtulo"}),(0,r.jsx)("br",{}),(0,r.jsx)("span",{children:"Tags correspondientes al video"}),(0,r.jsxs)("div",{className:j().tagsContainer,children:[(0,r.jsx)(u.D2U,{name:"space",label:"Espacio",options:_.U,rules:y}),(0,r.jsx)(u.D2U,{name:"topic",label:"T\xf3pico",options:s,rules:y}),(0,r.jsx)(u.D2U,{name:"module",label:"M\xf3dulo",options:l,rules:y})]}),(0,r.jsx)("br",{}),(0,r.jsx)("span",{children:"Instructor del video"}),(0,r.jsx)("div",{className:j().tagsContainer,children:(0,r.jsx)(u.D2U,{name:"instructor",label:"Instructor",rules:y,options:a})})]})};const b=e=>{let{showModal:t,loading:o,cohortVideo:n,setShowModal:i,handleUpdateVideo:a,instructorsOptions:l}=e;var s,d;const c=(0,C.useRouter)(),h=(0,m.R$)(null===(s=c.query)||void 0===s?void 0:s.cohortId),{data:v}=(0,f.ZP)("lecture-controller-get-all-lectures",(0,u.Oyn)(g.Z.henry.lectureControllerGetAllLectures,{})),p=null===v||void 0===v?void 0:v.map((e=>{var t,o;return{text:null!==(t=e.title)&&void 0!==t?t:"",value:null!==(o=e.title)&&void 0!==o?o:""}})).sort(((e,t)=>e.value<t.value?-1:e.value>t.value?1:0)),{data:_}=(0,f.ZP)(["cohort-controller-find-one",h],(0,u.Oyn)(g.Z.henry.cohortControllerFindOne,h)),x=null===_||void 0===_||null===(d=_.career)||void 0===d?void 0:d.modulesCofig.map((e=>{var t,o;return{text:null!==(t=e.title)&&void 0!==t?t:"",value:null!==(o=e.title)&&void 0!==o?o:""}})).sort(((e,t)=>e.value<t.value?-1:e.value>t.value?1:0));return(0,r.jsx)(V,{loading:o,showModal:t,cohortVideo:n,setShowModal:i,modulesOfCohorts:x,handleUpdateVideo:a,allLecturesTitles:p,instructorsOptions:l})};var E=o(3028),w=o.n(E);const R=c()(u.B22["body-small"],u.ceP["tertiary-grey"],w().subtitle),M=e=>{let{show:t,loading:o,showModal:n,cohortVideo:i,setShowModal:a,handleUpdateVideo:l,instructorsOptions:s,handleRefreshVideos:d,handleUpdateHideVideo:c,handleClickItemPopover:h}=e;const v=(0,r.jsxs)("div",{children:[(0,r.jsx)(u.W7S,{onClick:()=>a(!0),icon:"pencil-square",label:"Editar"}),(0,r.jsx)("br",{}),(0,r.jsx)(u.W7S,{onClick:()=>c(i.id),icon:"eye-slash",label:"Ocultar"})]});return(0,r.jsxs)("div",{className:w().container,children:[(0,r.jsxs)("div",{className:w().titleContainer,children:[(0,r.jsx)("h2",{className:w().title,children:null===i||void 0===i?void 0:i.title}),(null===i||void 0===i?void 0:i.hidden)&&(0,r.jsxs)("div",{className:w().hideVideoContainer,children:[(0,r.jsx)(u.JO$,{type:"eye-slash",color:"tertiary-grey"}),(0,r.jsx)("p",{className:R,children:"Video oculto"})]})]}),(0,r.jsx)(u.J2e,{show:t[i.id]||!1,onToggle:()=>h(i.id),trigger:"click",placement:"bottom",overlay:v,popperConfig:{modifiers:[{name:"preventOverflow",options:{boundary:null===document||void 0===document?void 0:document.getElementsByTagName("aside")[0]}},{name:"offset",options:{offset:[0,20]}}]},children:e=>{let{ref:t,...o}=e;return(0,r.jsx)("div",{ref:t,className:w().ellipsisContainer,...o,children:(0,r.jsx)(u.JO$,{type:"vertical-ellipsis"})})}}),(0,r.jsx)(b,{loading:o,showModal:n,cohortVideo:i,setShowModal:a,handleUpdateVideo:l,instructorsOptions:s,handleRefreshVideos:d})]})};const I=e=>{let{cohortVideo:t,handleRefreshVideos:o}=e;var i,a;const l=t.id,s=(0,C.useRouter)(),d=(0,m.R$)(null===(i=s.query)||void 0===i?void 0:i.cohortId),{addToast:c}=(0,u.F_u)(),[h,_]=(0,n.useState)(!1),[x,j]=(0,n.useState)({}),{data:y}=(0,f.ZP)(["cohort-controller-get-staff-by-cohort",d],(0,u.Oyn)(g.Z.henry.cohortControllerGetStaffByCohort,d)),{trigger:V,isMutating:b}=(0,p.Z)(["update-video-feeds",l],(0,u.G09)(g.Z.henry.henryVideoControllerHenryVideo,{id:l}),{onSuccess:()=>{c({type:"success",message:"Video editado con \xe9xito"})},onError:()=>{c({type:"error",message:"Hubo un error al intentar guardar la informaci\xf3n del video"})}}),E=null===y||void 0===y||null===(a=y.staff)||void 0===a?void 0:a.filter((e=>"instructor"===e.role.code)),w=null===E||void 0===E?void 0:E.map((e=>({text:e.person.fullname,value:e.person.fullname})));return(0,r.jsx)(M,{show:x,loading:b,showModal:h,cohortVideo:t,setShowModal:_,handleUpdateVideo:e=>{if(l){const{title:r,space:n,module:i,topic:a,instructor:s,...d}=e;V({id:l,data:{...d,title:r,tags:[null!==n&&void 0!==n?n:"",null!==a&&void 0!==a?a:"",null!==i&&void 0!==i?i:""],instructor:null!==s&&void 0!==s?s:"",hidden:t.id===l&&t.hidden}}).then((()=>{o()})).catch(v.noop)}},handleRefreshVideos:o,instructorsOptions:w||[],handleUpdateHideVideo:e=>{e&&V({id:e,data:{hidden:t.id===e&&!t.hidden}}).then((()=>{o()})).catch(v.noop)},handleClickItemPopover:e=>{j((t=>({...t,[e]:!t[e]})))}})};var O=o(5063),L=o.n(O);const k=c()(u.B22["body-small"],u.ceP["tertiary-grey"],L().subtitle),D=e=>{let{data:t=[],isInstructor:o,handleRefreshVideos:i,handleTrackPlayVideo:a,handleTrackErrorVideo:l}=e;const[d,c]=(0,n.useState)(!0);return(0,r.jsx)("div",{children:(null===t||void 0===t?void 0:t.length)?null===t||void 0===t?void 0:t.map((e=>{var t;return(0,r.jsxs)(u.Zbd,{className:L().containerVideoCard,children:[o&&(0,r.jsx)(I,{cohortVideo:e,handleRefreshVideos:i},e.id),!o&&(0,r.jsx)("h2",{children:e.title}),(0,r.jsxs)("div",{className:L().buttonContainer,children:[(0,r.jsxs)("div",{className:L().buttonContainer,children:[(0,r.jsx)(u.JO$,{type:"calendar"}),(0,r.jsxs)("p",{className:k,children:["Fecha de grabaci\xf3n:"," ",s()(e.recordingDate).format("DD/MM/YYYY")]})]}),e.instructor&&(0,r.jsxs)("div",{className:L().buttonContainer,children:[(0,r.jsx)(u.JO$,{type:"person"}),(0,r.jsxs)("p",{className:k,children:["Instructor: ",e.instructor]})]})]}),(0,r.jsx)("div",{className:L().tagContainer,children:null===(t=e.tags)||void 0===t?void 0:t.map((e=>(0,r.jsx)(u.DRh,{label:e})))}),(0,r.jsx)("div",{className:L().videoPlayer,onContextMenu:e=>e.preventDefault(),children:(0,r.jsx)(u.XNg,{config:{file:{attributes:{controlsList:"nodownload"}}},light:"/images/video-feed.png",playIcon:(0,r.jsx)("div",{}),preload:"auto",controls:!0,playing:!0,url:e.videoLocation,onPlay:()=>(e=>{d&&(c(!1),a(e))})(e),onError:()=>l(e),loop:!1})})]},e.id)})):(0,r.jsx)(h.u,{title:"No hay videos disponibles"})})};const N=e=>{let{isInstructor:t,studentViewVideos:o,handleRefreshVideos:n,data:l}=e;return(0,r.jsx)(D,{isInstructor:t,data:o||l,handleRefreshVideos:n,handleTrackPlayVideo:e=>{a.n.getInstance().track(i.K.VIDEO_FEED_CLICK_PLAY_VIDEO,{title:e.title,link:e.videoLocation,recordingDate:e.recordingDate,isInstructor:t})},handleTrackErrorVideo:e=>{a.n.getInstance().track(i.K.VIDEO_FEED_CLICK_PLAY_VIDEO_ERROR,{title:e.title,link:e.videoLocation,recordingDate:e.recordingDate,isInstructor:t})}})}},9927:function(e,t,o){"use strict";o.d(t,{R$:function(){return r},b_:function(){return n}});const r=e=>String(e),n=(e,t)=>Object.entries(t).reduce(((e,t)=>{let[o,r]=t;return e.replace("[".concat(o,"]"),r)}),e)},1747:function(e){e.exports={tagsContainer:"modal-video_tagsContainer__tT3xL"}},3028:function(e){e.exports={container:"popover_container__6BCoL",ellipsisContainer:"popover_ellipsisContainer__hleFj",titleContainer:"popover_titleContainer__YTbhq",title:"popover_title__q1M01",subtitle:"popover_subtitle__bEq4H",hideVideoContainer:"popover_hideVideoContainer__0lNSb"}},5063:function(e){e.exports={containerVideoCard:"video-card-with-title_containerVideoCard__or5KB",buttonContainer:"video-card-with-title_buttonContainer__GyA9u",popover:"video-card-with-title_popover__q3ES1",subtitle:"video-card-with-title_subtitle__AXq5S",videoPlayer:"video-card-with-title_videoPlayer__ka6Oq",buttonsContainer:"video-card-with-title_buttonsContainer__Mn_Rb",tagContainer:"video-card-with-title_tagContainer__Qj4Q8"}},4334:function(e,t,o){"use strict";o.d(t,{Z:function(){return l}});var r=o(7294),n=o(5591),i=o(1753);const a=i.w6?e=>{e()}:r.startTransition,l=(0,i.xD)(n.ZP,(()=>(e,t,o={})=>{const{mutate:l}=(0,n.kY)(),s=(0,r.useRef)(e),d=(0,r.useRef)(t),c=(0,r.useRef)(o),u=(0,r.useRef)(0),[h,v,p]=(e=>{const[,t]=(0,r.useState)({}),o=(0,r.useRef)(!1),n=(0,r.useRef)(e),a=(0,r.useRef)({data:!1,error:!1,isValidating:!1}),l=(0,r.useCallback)((e=>{let r=!1;const i=n.current;for(const t in e){const o=t;i[o]!==e[o]&&(i[o]=e[o],a.current[o]&&(r=!0))}r&&!o.current&&t({})}),[]);return(0,i.LI)((()=>(o.current=!1,()=>{o.current=!0}))),[n,a.current,l]})({data:i.i_,error:i.i_,isMutating:!1}),g=h.current,f=(0,r.useCallback)((async(e,t)=>{const[o,r]=(0,i.qC)(s.current);if(!d.current)throw new Error("Can\u2019t trigger the mutation: missing fetcher.");if(!o)throw new Error("Can\u2019t trigger the mutation: missing key.");const n=(0,i.PM)((0,i.PM)({populateCache:!1,throwOnError:!0},c.current),t),h=(0,i.u3)();u.current=h,p({isMutating:!0});try{const t=await l(o,d.current(r,{arg:e}),(0,i.PM)(n,{throwOnError:!0}));var v,g;if(u.current<=h)a((()=>p({data:t,isMutating:!1,error:void 0}))),null==(v=(g=n).onSuccess)||v.call(g,t,o,n);return t}catch(m){var f,C;if(u.current<=h)if(a((()=>p({error:m,isMutating:!1}))),null==(f=(C=n).onError)||f.call(C,m,o,n),n.throwOnError)throw m}}),[]),C=(0,r.useCallback)((()=>{u.current=(0,i.u3)(),p({data:i.i_,error:i.i_,isMutating:!1})}),[]);return(0,i.LI)((()=>{s.current=e,d.current=t,c.current=o})),{trigger:f,reset:C,get data(){return v.data=!0,g.data},get error(){return v.error=!0,g.error},get isMutating(){return v.isMutating=!0,g.isMutating}}}))}}]);