(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3248],{28:function(e,t,r){"use strict";var n=r(7294);t.Z=function(e){const t=(0,n.useRef)(e);return t.current=e,t}},5210:function(e,t,r){"use strict";var n=r(7294),o=r(28),i=r(2770),c=r(1663);t.Z=e=>{c.Z&&((0,i.mf)(e)||console.error("useUnmount expected parameter is a function, got "+typeof e));const t=(0,o.Z)(e);(0,n.useEffect)((()=>()=>{t.current()}),[])}},3621:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(7294),o=r(5210);function i(e,t){if(e===t)return!0;for(let r=0;r<e.length;r++)if(!Object.is(e[r],t[r]))return!1;return!0}var c=r(8002);var a=e=>(t,r,a)=>{const s=(0,n.useRef)(!1),l=(0,n.useRef)([]),u=(0,n.useRef)([]),d=(0,n.useRef)();e((()=>{var e;const n=(Array.isArray(a)?a:[a]).map((e=>(0,c.n)(e)));if(!s.current)return s.current=!0,l.current=n,u.current=r,void(d.current=t());n.length===l.current.length&&i(n,l.current)&&i(r,u.current)||(null===(e=d.current)||void 0===e||e.call(d),l.current=n,u.current=r,d.current=t())})),(0,o.Z)((()=>{var e;null===(e=d.current)||void 0===e||e.call(d),s.current=!1}))}},8002:function(e,t,r){"use strict";r.d(t,{n:function(){return i}});var n=r(2770),o=r(2982);function i(e,t){if(!o.Z)return;if(!e)return t;let r;return r=(0,n.mf)(e)?e():"current"in e?e.current:e,r}},2770:function(e,t,r){"use strict";r.d(t,{G7:function(){return o},mf:function(){return n}});const n=e=>"function"===typeof e,o=e=>"undefined"===typeof e},2982:function(e,t){"use strict";const r=!("undefined"===typeof window||!window.document||!window.document.createElement);t.Z=r},1663:function(e,t){"use strict";t.Z=!1},9682:function(e,t,r){"use strict";var n=r(7294);const o=(0,r(3621).Z)(n.useEffect);t.Z=o},1814:function(e,t,r){"use strict";r.d(t,{Ob:function(){return l},dp:function(){return a},mI:function(){return s}});var n=r(7484),o=r.n(n),i=r(1479),c=r(4786);const a=e=>{const[t,r]=e.split(":");return"".concat(t,"h ").concat(r,"m")},s=(e,t,r,n)=>e?e.sort(((e,t)=>e.order-t.order)).map(((e,o)=>({code:"L".concat(o+1),title:e.title,linkProps:{href:r&&n?"/my-cohorts/".concat(r,"/lecture/").concat(e.id):"/lecture/".concat(e.id),legacyBehavior:!0,onClick:()=>{i.n.getInstance().track(c.K.CAREER_CLICK_LECTURE,{lectureName:e.title,moduleName:t})}},time:a(e.estimatedTime),completed:e.completed,completedLabel:"Completada"}))):[],l=(e,t)=>e?e.sort(((e,t)=>e.order-t.order)).map((e=>{let r="";return t&&(r=e.checkpoint?o()(e.checkpoint.startDate,"YYYY-MM-DD").format("DD/MM"):"-"),{id:e.id,name:e.name,order:e.order,nextCheckpoint:r,progress:e.progress?Math.ceil(e.progress):void 0,lectures:s(e.lectures,e.name),disabled:!!e.disabled,duration:a(e.estimatedTime),disabledMessage:""}})):[]},8214:function(e,t,r){"use strict";r.d(t,{V:function(){return n},Z:function(){return m}});var n,o=r(5893),i=r(7294),c=r(1163),a=r(8919),s=r(1479),l=r(4786),u=r(6873),d=r.n(u);function m(){const[e,t]=(0,i.useState)(n.DEFAULT),{username:r}=(0,a.kPO)(),u=(0,c.useRouter)(),m=s.n.getInstance();function v(e){var t,r,o,i;e===n.FULL_WIDTH?(null===(t=document.getElementById("main-content-container"))||void 0===t||t.classList.add(d().mainElement),null===(r=document.getElementById("aside-container"))||void 0===r||r.classList.add(d().sidebar)):(null===(o=document.getElementById("main-content-container"))||void 0===o||o.classList.remove(d().mainElement),null===(i=document.getElementById("aside-container"))||void 0===i||i.classList.remove(d().sidebar))}return{handleClick:function(){e===n.DEFAULT?(t(n.FULL_WIDTH),m.track(l.K.LECTURE_ENTER_VIEWPORT_FULL_WIDTH,{url:u.asPath,username:r}),v(n.FULL_WIDTH)):(t(n.DEFAULT),m.track(l.K.LECTURE_EXIT_VIEWPORT_FULL_WIDTH,{url:u.asPath,username:r}),v(n.DEFAULT))},buttonContent:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.JO$,{type:e===n.DEFAULT?"arrows-angle-expand":"arrows-angle-contract"}),e===n.DEFAULT?"Pantalla completa":"Salir de pantalla completa"]}),viewport:e}}!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.FULL_WIDTH=1]="FULL_WIDTH"}(n||(n={}))},145:function(e,t,r){"use strict";r.d(t,{Q:function(){return c}});var n=r(5893),o=(r(7294),r(8919)),i=r(1814);const c=e=>{const{currentModule:t,isLoading:r,cohortId:c,isInstructor:a}=e;let s=(0,i.mI)(null===t||void 0===t?void 0:t.lectures,null===t||void 0===t?void 0:t.name);return c&&a&&(s=(0,i.mI)(null===t||void 0===t?void 0:t.lectures,null===t||void 0===t?void 0:t.name,c,a)),r?(0,n.jsx)("div",{children:"Loading..."}):t?(0,n.jsx)(o.da_,{breakpoints:["md","lg","sd"],children:(0,n.jsx)(o.zuy,{moduleCode:"0",moduleName:t.name,lecturesDuration:(0,i.dp)(t.estimatedTime),lectures:s})}):null}},645:function(e,t,r){"use strict";r.d(t,{a:function(){return q}});var n=r(5893),o=r(5591),i=r(6486),c=r(7294),a=r(4334),s=r(1534),l=r(9927),u=r(8919),d=r(4786),m=r(1479),v=r(1163),h=r(5537),f=r(1033),_=r(5210);var C=function(e){const t=(0,c.useRef)(0),[r,n]=(0,c.useState)(e),o=(0,c.useCallback)((e=>{cancelAnimationFrame(t.current),t.current=requestAnimationFrame((()=>{n(e)}))}),[]);return(0,_.Z)((()=>{cancelAnimationFrame(t.current)})),[r,o]},g=r(8002),p=r(2982),E=r(9682);var L=(0,r(3621).Z)(c.useLayoutEffect);var y=p.Z?L:E.Z;var x=function(e){const[t,r]=C();return y((()=>{const t=(0,g.n)(e);if(!t)return;const n=new f.Z((e=>{e.forEach((e=>{const{clientWidth:t,clientHeight:n}=e.target;r({width:t,height:n})}))}));return n.observe(t),()=>{n.disconnect()}}),[],e),t},k=r(4184),M=r.n(k),j=r(1611),T=r.n(j);const I=e=>{const{links:t}=e,r=M()(u.B22["title-large"],u.ceP["primary-grey"]);return(0,n.jsxs)("div",{className:T().usefulLinksContainer,children:[(0,n.jsx)("div",{className:r,children:"Enlaces \xfatiles"}),(0,n.jsx)(u.X2j,{className:T().linkCardsContainer,children:t.map((e=>{let{link:t,title:r}=e;return(0,n.jsx)(u.JXS,{xs:"12",md:"4",children:(0,n.jsx)(u.kZU,{title:r,linkProps:{href:t||"",target:"_blank"},subtitle:"url"})})}))})]})};var b=r(3257),R=r.n(b);const N=M()(u.B22["title-large"],u.ceP["primary-grey"]),S=e=>{let{complementaryContent:t,setTitle:r,setUrl:o}=e;(0,c.useEffect)((()=>{if(t.length>0){const e=t[0];r(e.title),o(e.link||"")}}),[t,r,o]);return(0,n.jsxs)("div",{className:R().relatedVideosContainer,children:[(0,n.jsx)("div",{className:N,children:"Videos relacionados"}),(0,n.jsx)("div",{className:R().videosContainer,children:t.map((e=>{let{title:t,link:i}=e;return i?(0,n.jsx)("button",{className:R().overlay,type:"button",onClick:()=>((e,t)=>{r(e),o(t)})(t,i),children:(0,n.jsx)("div",{className:R().containerVideo,children:(0,n.jsx)(u.cBK,{className:R().videoCard,title:t,linkProps:{href:i},thumbProps:{src:"/images/video.jpg",alt:t}})})},i):null}))})]})};var P=r(6851),A=r.n(P);const O=e=>{const{usefulLinks:t,complementaryContent:r}=e,[o,i]=(0,c.useState)(0),a=(0,c.useRef)(null),s=x(a),[l,d]=(0,c.useState)(""),[m,v]=(0,c.useState)("");return(0,c.useEffect)((()=>{s&&i(s.width/16*9)}),[s]),(0,n.jsxs)("div",{children:[l&&m&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{children:m}),(0,n.jsx)("div",{className:A().videoPlayer,ref:a,style:{height:o},children:(0,n.jsx)(u.Y7g,{controls:!0,playing:!1,url:l})})]}),(0,n.jsxs)("div",{className:A().container,children:[!!r.length&&(0,n.jsx)(S,{setUrl:d,setTitle:v,complementaryContent:r}),!!t.length&&(0,n.jsx)(I,{links:t})]})]})};var w=r(6873),D=r.n(w),U=r(8214);const Z=e=>{let{url:t,isMd:r,isMobile:o,iframeReady:i,iframeOnload:a,showAnimationLottie:s}=e;const{buttonContent:l,handleClick:d}=(0,U.Z)(),[m,v]=(0,c.useState)(),h=M()(D().button,{[D().hideButton]:o}),f=M()(D().iframe,{[D().iframeMobile]:o,[D().iframeMd]:r});return(0,c.useEffect)((()=>{m||v((new Date).getTime())}),[]),(0,n.jsxs)(n.Fragment,{children:[(s||!m)&&(0,n.jsx)("div",{className:D().lottie,children:(0,n.jsx)(u.ce$,{})}),m&&(0,n.jsxs)("div",{className:D().scormContent,children:[(0,n.jsx)(u.zxk,{className:h,onClick:d,children:l}),(0,n.jsx)("iframe",{className:f,title:"Lecture scorm",id:"main-iframe",src:i?"".concat(t,"?v=").concat(m):void 0,width:"100%",allow:"autoplay; fullscreen; picture-in-picture",frameBorder:0,onLoad:a})]})]})};const F=()=>{const[e,t]=(0,c.useState)(),[r,n]=(0,c.useState)(""),o=(0,v.useRouter)(),d=(0,l.R$)(o.query.id),{trigger:m}=(0,a.Z)(["lecture-controller-update-scorm-tracking",e,r],(0,u.G09)(s.Z.henry.lectureControllerUpdateScormTracking)),h={scormConfig:JSON.stringify(null===e||void 0===e?void 0:e.changeProgress),lastBookmark:r,status:null===e||void 0===e?void 0:e.status};return(0,c.useEffect)((()=>{window.addEventListener("message",(e=>{var t;"SET_BOOKMARK"===e.data.type&&(t=e.data.data,n(t))}),!1),window.addEventListener("message",(e=>{var r;"SET_PROGRESS"===e.data.type&&(r=e.data.data,t(r))}),!1)}),[r,e]),(e&&r||"NOT_STARTED"===(null===e||void 0===e?void 0:e.status))&&m({id:d,data:h}).then(i.noop).catch(i.noop),{progress:(null===e||void 0===e?void 0:e.changeProgress)||{},last_bookmark:r,status:null===e||void 0===e?void 0:e.status}};const K=e=>{const{handleCompletedScorm:t,scormContent:r}=e,o=(0,u.cKm)(),i="sm"===o,a="md"===o,s=F(),[l,d]=(0,c.useState)(!1),[m,v]=(0,c.useState)(!1),[h,f]=(0,c.useState)(!0),_="COMPLETED"===s.status,C="COMPLETED"===(null===r||void 0===r?void 0:r.status);return(0,c.useEffect)((()=>{r||l||f(!0),r&&(d(!0),m||!_||C||(v(!0),t()))}),[l,r,m,_,t,C]),(0,n.jsx)(Z,{...e,isMd:a,isMobile:i,iframeReady:l,iframeOnload:()=>{const e=document.getElementById("main-iframe");if(e&&e.contentWindow){if(r&&l&&r.progress){const n=JSON.parse(null===r||void 0===r?void 0:r.progress);var t;e.contentWindow.postMessage({type:"LOAD_SCORM",data:{progress:null!==n&&void 0!==n?n:s.progress,last_bookmark:null!==(t=null===r||void 0===r?void 0:r.lastBookmark)&&void 0!==t?t:s.last_bookmark}},"*"),f(!1)}var n;if(!r.progress&&l)e.contentWindow.postMessage({type:"LOAD_SCORM",data:{progress:s.progress,last_bookmark:null!==(n=null===r||void 0===r?void 0:r.lastBookmark)&&void 0!==n?n:s.last_bookmark}},"*"),f(!1)}},isLectureCompleted:_,showAnimationLottie:h})};var B;!function(e){e.README="lecture",e.DISSCUSSIONS="discussions"}(B||(B={}));var V=r(8e3),W=r.n(V);const H=M()(W().title,u.B22["title-small"],u.ceP["secondary-grey"]),J=M()(u.B22["body-medium"],u.ceP["tertiary-grey"]),Y=e=>{const{url:t,lecture:r,onSubmit:o,isLoading:i,handleTrackPlayVideo:a,handleTrackErrorVideo:s,isInstructor:l=!1}=e,{description:d,title:m,readme:v}=r,[h,f]=(0,c.useState)(!0);return(0,n.jsxs)("div",{className:W().container,children:[t&&(0,n.jsx)("div",{className:W().videoPlayer,children:(0,n.jsx)(u.Y7g,{url:t,playing:!1,onPlay:()=>{h&&(f(!1),a(t))},onError:()=>s(t)})}),!l&&(0,n.jsx)("div",{className:W().buttonContainer,children:r.completed?(0,n.jsx)(u.DRh,{backgroundColor:"green-lighter",borderColor:"transparent",labelColor:"green-darker",label:"Lecture completada",iconRight:"check2"}):(0,n.jsx)(u.gkO,{onSubmit:o,children:(0,n.jsxs)(u.zxk,{type:"primary",loading:i,htmlType:"submit",children:["Completar lecture ",(0,n.jsx)(u.JO$,{type:"check2"})]})})}),(0,n.jsxs)(u.mQc,{defaultActiveKey:B.README,children:[(0,n.jsx)(u.$er,{children:(0,n.jsx)(u.o$F,{eventKey:B.README,type:"default",children:"Readme"})}),(0,n.jsx)(u.I5H,{children:(0,n.jsx)(u.Jml,{eventKey:B.README,children:(0,n.jsxs)("div",{className:W().readme,children:[(0,n.jsx)("h3",{className:H,children:m}),(0,n.jsx)("p",{className:J,children:d}),(0,n.jsx)("div",{className:W().readmeContainer,dangerouslySetInnerHTML:{__html:v}})]})})})]})]})};const $=e=>{const{lecture:t,isLoading:r,onSubmit:o,currentModule:i,isInstructor:a=!1}=e,{video:s}=t,[l,u]=(0,c.useState)("");return(0,c.useEffect)((()=>{u((null===s||void 0===s?void 0:s.url)||"")}),[s]),(0,n.jsx)(Y,{url:l,lecture:t,onSubmit:o,isLoading:r,handleTrackPlayVideo:e=>{m.n.getInstance().track(d.K.LECTURE_PLAY_VIDEO,{urlVideo:e,moduleName:"M".concat((null===i||void 0===i?void 0:i.order)||""),moduleId:null===i||void 0===i?void 0:i.id})},handleTrackErrorVideo:e=>{m.n.getInstance().track(d.K.LECTURE_PLAY_VIDEO_ERROR,{urlVideo:e,moduleName:"M".concat((null===i||void 0===i?void 0:i.order)||""),moduleId:null===i||void 0===i?void 0:i.id})},isInstructor:a})};var G;!function(e){e.LECTURE="lecture",e.COMPLEMENTARY_MATERIAL="complementary_material"}(G||(G={}));const X=e=>{let{error:t,lecture:r,isScorm:o,onSubmit:i,isMutating:c,refreshData:a,scormContent:s,currentCohort:l,currentCareer:d,isLectureLoading:m,handleCompletedScorm:v,moduleCurrentLecture:h,isCurrentCohortLoading:f,handleTrackNextLectureMixPanel:_,isInstructor:C=!1}=e;var g;return o&&s?(0,n.jsx)(K,{lecture:r,onSubmit:i,scormContent:s,url:(null===r||void 0===r||null===(g=r.video)||void 0===g?void 0:g.url)||"",moduleCurrentLecture:h,handleCompletedScorm:v,isLoading:f||m,handleTrackNextLectureMixPanel:_}):(0,n.jsxs)(u.Zbd,{hideBreakpoints:"sm",children:[t&&(0,n.jsx)("div",{children:"Hubo un error cargando la lecture..."}),r&&(0,n.jsxs)(u.mQc,{defaultActiveKey:G.LECTURE,children:[(0,n.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,n.jsxs)(u.$er,{type:"custom",children:[(0,n.jsx)(u.o$F,{eventKey:G.LECTURE,type:"custom",children:"Lecture"}),(0,n.jsx)(u.o$F,{eventKey:G.COMPLEMENTARY_MATERIAL,type:"custom",children:"Material Complementario"})]})}),(0,n.jsxs)(u.I5H,{children:[(0,n.jsx)(u.Jml,{eventKey:G.LECTURE,children:r?(0,n.jsx)($,{lecture:r,onSubmit:i,refreshData:a,currentCohort:l,currentModule:C?h:null===d||void 0===d?void 0:d.currentModule,isLoading:f||m||c,isInstructor:C}):(0,n.jsx)("div",{children:"No hay lecture"})}),(0,n.jsx)(u.Jml,{eventKey:G.COMPLEMENTARY_MATERIAL,children:r?(0,n.jsx)(O,{...r}):(0,n.jsx)("div",{children:"No hay material complementario"})})]})]})]})};const q=e=>{let{error:t,lecture:r,isScorm:c,currentCareer:f,refreshLectures:_,isLectureLoading:C,moduleCurrentLecture:g,refreshCurrentCareer:p,isInstructor:E=!1,selectedCohortId:L}=e;const y=(0,v.useRouter)(),x=(0,l.R$)(y.query.id),{addToast:k}=(0,u.F_u)(),{currentCohort:M,isCurrentCohortLoading:j}=(0,h.u)(),{data:T,mutate:I}=(0,o.ZP)(["lecture-controller-get-scorm-content-progress",x],(0,u.Oyn)(s.Z.henry.lectureControllerGetScormContentProgress,x)),{trigger:b,isMutating:R}=(0,a.Z)("complete-lecture",(0,u.NNl)(s.Z.henry.trackingControllerWatchLecture)),N=()=>{_().then(i.noop).catch(i.noop),I().then(i.noop).catch(i.noop),!E&&p&&p().then(i.noop).catch(i.noop)};return c&&!T?null:(0,n.jsx)(X,{error:t,lecture:r,isScorm:c,onSubmit:async()=>{if(!E&&M&&(null===f||void 0===f?void 0:f.currentModule))try{var e;await b({cohort:M.id,module:null===f||void 0===f?void 0:f.currentModule.id,lecture:null!==(e=null===r||void 0===r?void 0:r.id)&&void 0!==e?e:""}),k({type:"success",message:"La lecture fue completada con \xe9xito"}),m.n.getInstance().track(d.K.LECTURE_CLICK_SET_COMPLETE,{cohortId:M.id,moduleId:null===f||void 0===f?void 0:f.currentModule.id,moduleName:"M".concat((null===f||void 0===f?void 0:f.currentModule.order)||""),lectureId:null===r||void 0===r?void 0:r.id,lectureName:null===r||void 0===r?void 0:r.title}),N()}catch(t){k({type:"error",message:"Hubo un error al completar la lecture."}),m.n.getInstance().track(d.K.LECTURE_CLICK_SET_COMPLETE_ERROR,{cohortId:M.id,moduleId:null===f||void 0===f?void 0:f.currentModule.id,moduleName:"M".concat((null===f||void 0===f?void 0:f.currentModule.order)||""),lectureId:null===r||void 0===r?void 0:r.id,lectureName:null===r||void 0===r?void 0:r.title})}},isMutating:R,refreshData:N,scormContent:T,isInstructor:E,currentCareer:f,currentCohort:M,isLectureLoading:C,moduleCurrentLecture:g,handleCompletedScorm:()=>{M&&(null===f||void 0===f?void 0:f.currentModule)&&(null===r||void 0===r?void 0:r.id)&&b({cohort:M.id,module:null===f||void 0===f?void 0:f.currentModule.id,lecture:null===r||void 0===r?void 0:r.id}).then(i.noop).catch(i.noop),N()},isCurrentCohortLoading:j,handleTrackNextLectureMixPanel:e=>{m.n.getInstance().track(d.K.LECTURE_CLICK_NEXT_LECTURE,{url:e,moduleName:"M".concat(L?(null===g||void 0===g?void 0:g.order)||"":(null===f||void 0===f?void 0:f.currentModule.order)||""),cohortId:L||(null===M||void 0===M?void 0:M.id),moduleId:L?null===g||void 0===g?void 0:g.id:null===f||void 0===f?void 0:f.currentModule.id})}})}},9927:function(e,t,r){"use strict";r.d(t,{R$:function(){return n},b_:function(){return o}});const n=e=>String(e),o=(e,t)=>Object.entries(t).reduce(((e,t)=>{let[r,n]=t;return e.replace("[".concat(r,"]"),n)}),e)},6851:function(e){e.exports={container:"complementary-material_container__9LQYA",videoPlayer:"complementary-material_videoPlayer__Pw204"}},3257:function(e){e.exports={relatedVideosContainer:"related-videos_relatedVideosContainer__Gy1gH",filtersContainer:"related-videos_filtersContainer__2glfy",videosContainer:"related-videos_videosContainer__D2k64",containerVideo:"related-videos_containerVideo__x_jJU",overlay:"related-videos_overlay__OSmd2",videoCard:"related-videos_videoCard__4EtLI"}},1611:function(e){e.exports={usefulLinksContainer:"useful-links_usefulLinksContainer__vXbqv",linkCardsContainer:"useful-links_linkCardsContainer__WygzB"}},6873:function(e){e.exports={mainElement:"lecture-content-scorm_mainElement__khPCO",sidebar:"lecture-content-scorm_sidebar__TwlNM",iframe:"lecture-content-scorm_iframe__Ipive",iframeMd:"lecture-content-scorm_iframeMd__IYtJB",iframeMobile:"lecture-content-scorm_iframeMobile__OdAJZ",buttonsContainer:"lecture-content-scorm_buttonsContainer__dh601",linksContainer:"lecture-content-scorm_linksContainer___Zo_f",buttonContainer:"lecture-content-scorm_buttonContainer__62eLp",textContainer:"lecture-content-scorm_textContainer__JanX_",lottie:"lecture-content-scorm_lottie__FNse3",button:"lecture-content-scorm_button__1NAVR",hideButton:"lecture-content-scorm_hideButton__3KNFh",scormContent:"lecture-content-scorm_scormContent__s_Lx2"}},8e3:function(e){e.exports={container:"lecture-content-traditional_container__Na9PN",videoPlayer:"lecture-content-traditional_videoPlayer__3KQGS",buttonContainer:"lecture-content-traditional_buttonContainer___zoJn",readme:"lecture-content-traditional_readme__FuJIN",title:"lecture-content-traditional_title__LLEIA",readmeContainer:"lecture-content-traditional_readmeContainer__v9pBO"}},4334:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(7294),o=r(5591),i=r(1753);const c=i.w6?e=>{e()}:n.startTransition,a=(0,i.xD)(o.ZP,(()=>(e,t,r={})=>{const{mutate:a}=(0,o.kY)(),s=(0,n.useRef)(e),l=(0,n.useRef)(t),u=(0,n.useRef)(r),d=(0,n.useRef)(0),[m,v,h]=(e=>{const[,t]=(0,n.useState)({}),r=(0,n.useRef)(!1),o=(0,n.useRef)(e),c=(0,n.useRef)({data:!1,error:!1,isValidating:!1}),a=(0,n.useCallback)((e=>{let n=!1;const i=o.current;for(const t in e){const r=t;i[r]!==e[r]&&(i[r]=e[r],c.current[r]&&(n=!0))}n&&!r.current&&t({})}),[]);return(0,i.LI)((()=>(r.current=!1,()=>{r.current=!0}))),[o,c.current,a]})({data:i.i_,error:i.i_,isMutating:!1}),f=m.current,_=(0,n.useCallback)((async(e,t)=>{const[r,n]=(0,i.qC)(s.current);if(!l.current)throw new Error("Can\u2019t trigger the mutation: missing fetcher.");if(!r)throw new Error("Can\u2019t trigger the mutation: missing key.");const o=(0,i.PM)((0,i.PM)({populateCache:!1,throwOnError:!0},u.current),t),m=(0,i.u3)();d.current=m,h({isMutating:!0});try{const t=await a(r,l.current(n,{arg:e}),(0,i.PM)(o,{throwOnError:!0}));var v,f;if(d.current<=m)c((()=>h({data:t,isMutating:!1,error:void 0}))),null==(v=(f=o).onSuccess)||v.call(f,t,r,o);return t}catch(g){var _,C;if(d.current<=m)if(c((()=>h({error:g,isMutating:!1}))),null==(_=(C=o).onError)||_.call(C,g,r,o),o.throwOnError)throw g}}),[]),C=(0,n.useCallback)((()=>{d.current=(0,i.u3)(),h({data:i.i_,error:i.i_,isMutating:!1})}),[]);return(0,i.LI)((()=>{s.current=e,l.current=t,u.current=r})),{trigger:_,reset:C,get data(){return v.data=!0,f.data},get error(){return v.error=!0,f.error},get isMutating(){return v.isMutating=!0,f.isMutating}}}))}}]);